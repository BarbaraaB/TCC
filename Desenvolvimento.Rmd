#Install Libs
```{r Libs, include=FALSE}
install.packages("syuzhet")
install.packages('pander')
install.packages("tidyverse")
install.packages("lubridate")
library(syuzhet)
library(readr)
library(tidyverse)
library(lubridate)
```

```{r Import Tweets, include=FALSE}
#Import entire database of tweets
cleaned_tweets <- read_csv("D:/Faculdade/TCC e IC/cleaned_tweets.csv")

#only part of the base, for testing
cleaned_tweets <- slice_sample(cleaned_tweets, n = 1000, replace = FALSE)

# # of lines
N <- length(cleaned_tweets$created_at)
```

```{r Extract Sentiments, include=FALSE}
#extracts the feeling of every word from the tweet
sentiment <- get_nrc_sentiment(cleaned_tweets$full_text, language = "portuguese")

#dataframe of the tweet date + the extraction of emotions
sentiment_df <- bind_cols(cleaned_tweets[,"created_at"],sentiment)

#grouping the dataframe months together with the sum of emotions
sentiment_month <- sentiment_df %>% 
  group_by(mes = month(created_at, label = TRUE, abbr = TRUE)) %>% 
  summarise(across(.cols = anger:trust, sum))

#database on longer format for chart
sentiment_month_longer <- pivot_longer(sentiment_month, anger:trust)

```


#scatter plot
g <- ggplot(sentiment_month_longer)+geom_point(aes(x=mes, y=value, color = name))
ggsave("D:/Faculdade/TCC e IC/Imagens/grafico_dispers.png", g)